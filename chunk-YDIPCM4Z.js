import{a as u}from"./chunk-ZZOCOVAD.js";import{b as l}from"./chunk-6LSECYII.js";import{K as o,P as p,a as n,b as i,k as s,o as a,x as m}from"./chunk-IWLHDEFP.js";var b=class r{http=p(l);apiUrl=`${u.apiUrl}/posts`;getPosts(){return this.http.get(this.apiUrl).pipe(a(t=>Array.isArray(t)?t.map(e=>i(n({},e),{image:e.image||"assets/PCY.png",username:e.username||"Anonymous",caption:e.caption||"",timestamp:e.timestamp?new Date(e.timestamp):new Date,likes:e.likes||[]})):[]),m(t=>(console.error("PostService.getPosts error:",t),s([]))))}createPost(t){return this.http.post(this.apiUrl,t)}updatePost(t,e){return this.http.patch(`${this.apiUrl}/${t}`,e)}deletePost(t){return this.http.delete(`${this.apiUrl}/${t}`)}getComments(t){return this.http.get(`${this.apiUrl}/${t}/comments`)}addComment(t,e,c){return this.http.post(`${this.apiUrl}/${t}/comments`,{username:e,comment:c})}toggleLike(t,e){return this.http.post(`${this.apiUrl}/${t}/toggle-like`,{userId:e})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=o({token:r,factory:r.\u0275fac,providedIn:"root"})};export{b as a};
